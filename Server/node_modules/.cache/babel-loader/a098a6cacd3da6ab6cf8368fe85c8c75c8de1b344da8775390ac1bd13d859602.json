{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dnish\\\\OneDrive\\\\Desktop\\\\PROJECTS\\\\CareerCrafts\\\\client\\\\src\\\\pages\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { Container, Box, Typography, TextField, Button, Paper, Link } from \"@mui/material\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../api/api\";\n//modified according to django\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const navigate = useNavigate();\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n    setError(\"\"); // Clear error when user types\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n    try {\n      const res = await api.post(\"/accounts/login/\", form); // Added trailing slash\n\n      // Correct response structure based on your Django backend\n      const {\n        tokens,\n        user\n      } = res.data;\n      localStorage.setItem(\"accessToken\", tokens.access);\n      localStorage.setItem(\"refreshToken\", tokens.refresh);\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      localStorage.setItem(\"role\", user.role);\n\n      // Navigate based on role\n      if (user.role === \"employee\") navigate(\"/employee\");else if (user.role === \"recruiter\") navigate(\"/recruiter\");else if (user.role === \"admin\") navigate(\"/admin\");else navigate(\"/login\");\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      const errorMessage = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Login failed. Please check your credentials.\";\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        p: 4,\n        mt: 6\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        align: \"center\",\n        gutterBottom: true,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Typography, {\n        color: \"error\",\n        align: \"center\",\n        sx: {\n          mb: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        component: \"form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Email\",\n          type: \"email\",\n          name: \"email\",\n          value: form.email,\n          onChange: handleChange,\n          fullWidth: true,\n          margin: \"normal\",\n          required: true,\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Password\",\n          type: \"password\",\n          name: \"password\",\n          value: form.password,\n          onChange: handleChange,\n          fullWidth: true,\n          margin: \"normal\",\n          required: true,\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          fullWidth: true,\n          sx: {\n            mt: 3\n          },\n          disabled: loading,\n          children: loading ? \"Logging in...\" : \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          textAlign: \"center\",\n          sx: {\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/forgot-password\",\n            underline: \"hover\",\n            children: \"Forgot Password?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          textAlign: \"center\",\n          sx: {\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            children: [\"Don't have an account?\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n              component: \"button\",\n              variant: \"body2\",\n              onClick: () => navigate(\"/register\"),\n              sx: {\n                cursor: \"pointer\"\n              },\n              children: \"Register\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"vrNNUmBdpMOg+BUH/5SHZlls4+k=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Container","Box","Typography","TextField","Button","Paper","Link","useNavigate","api","jsxDEV","_jsxDEV","Login","_s","navigate","form","setForm","email","password","loading","setLoading","error","setError","handleChange","e","target","name","value","handleSubmit","preventDefault","res","post","tokens","user","data","localStorage","setItem","access","refresh","JSON","stringify","role","err","_err$response","_err$response$data","_err$response2","_err$response2$data","errorMessage","response","message","maxWidth","children","elevation","sx","p","mt","variant","align","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","mb","component","onSubmit","label","type","onChange","fullWidth","margin","required","disabled","textAlign","href","underline","onClick","cursor","_c","$RefreshReg$"],"sources":["C:/Users/dnish/OneDrive/Desktop/PROJECTS/CareerCrafts/client/src/pages/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  Container,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Paper,\r\n  Link,\r\n} from \"@mui/material\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../api/api\";\r\n//modified according to django\r\nconst Login = () => {\r\n  const navigate = useNavigate();\r\n  const [form, setForm] = useState({ email: \"\", password: \"\" });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n    setError(\"\"); // Clear error when user types\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const res = await api.post(\"/accounts/login/\", form); // Added trailing slash\r\n\r\n      // Correct response structure based on your Django backend\r\n      const { tokens, user } = res.data;\r\n      \r\n      localStorage.setItem(\"accessToken\", tokens.access);\r\n      localStorage.setItem(\"refreshToken\", tokens.refresh);\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      localStorage.setItem(\"role\", user.role);\r\n\r\n      // Navigate based on role\r\n      if (user.role === \"employee\") navigate(\"/employee\");\r\n      else if (user.role === \"recruiter\") navigate(\"/recruiter\");\r\n      else if (user.role === \"admin\") navigate(\"/admin\");\r\n      else navigate(\"/login\");\r\n      \r\n    } catch (err) {\r\n      const errorMessage = err.response?.data?.error || \r\n                          err.response?.data?.message || \r\n                          \"Login failed. Please check your credentials.\";\r\n      setError(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Paper elevation={3} sx={{ p: 4, mt: 6 }}>\r\n        <Typography variant=\"h5\" align=\"center\" gutterBottom>\r\n          Login\r\n        </Typography>\r\n        \r\n        {error && (\r\n          <Typography color=\"error\" align=\"center\" sx={{ mb: 2 }}>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n        \r\n        <Box component=\"form\" onSubmit={handleSubmit}>\r\n          <TextField\r\n            label=\"Email\"\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={form.email}\r\n            onChange={handleChange}\r\n            fullWidth\r\n            margin=\"normal\"\r\n            required\r\n            disabled={loading}\r\n          />\r\n          <TextField\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={form.password}\r\n            onChange={handleChange}\r\n            fullWidth\r\n            margin=\"normal\"\r\n            required\r\n            disabled={loading}\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            fullWidth\r\n            sx={{ mt: 3 }}\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Logging in...\" : \"Login\"}\r\n          </Button>\r\n\r\n          <Box textAlign=\"center\" sx={{ mt: 2 }}>\r\n            <Link href=\"/forgot-password\" underline=\"hover\">\r\n              Forgot Password?\r\n            </Link>\r\n          </Box>\r\n\r\n          <Box textAlign=\"center\" sx={{ mt: 2 }}>\r\n            <Typography variant=\"body2\">\r\n              Don't have an account?{\" \"}\r\n              <Link\r\n                component=\"button\"\r\n                variant=\"body2\"\r\n                onClick={() => navigate(\"/register\")}\r\n                sx={{ cursor: \"pointer\" }}\r\n              >\r\n                Register\r\n              </Link>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}